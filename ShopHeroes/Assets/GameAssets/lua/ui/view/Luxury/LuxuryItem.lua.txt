require("config/LuxuryConfigManager")
local EventDispatcher = require("event/EventDispatcher")

local selfBtn
local icon
local allStar = {}

local data

function InitComp()
	icon = self:GetObjByName("icon"):GetComponent("GUIIcon")
	allStar[1] = self:GetObjByName("star1"):GetComponent("GUIIcon")
	allStar[2] = self:GetObjByName("star2"):GetComponent("GUIIcon")
	allStar[3] = self:GetObjByName("star3"):GetComponent("GUIIcon")
	allStar[4] = self:GetObjByName("star4"):GetComponent("GUIIcon")
	allStar[5] = self:GetObjByName("star5"):GetComponent("GUIIcon")
	selfBtn = self:GetComponent("Button")

	selfBtn:ButtonClickTween(function ()
			EventDispatcher:dispatchEvent(GameEvent.LuxuryEvent.ShowUI_LuxuryInfo,data)
		end
	)
end

function SetData(level)
	data = LuxuryConfigManager:GetConfigByLuxuryNum(level)

	if(data ~= nil)then
		icon:SetSprite(data.atlas,data.icon)

		for i = 1, #allStar do
			if(i <= tonumber(data.stars))then
				allStar[i]:SetSprite("luxury_atlas","yingxiong_xingcheng")
			else
				allStar[i]:SetSprite("luxury_atlas","yingxiong_xingcheng1")
			end
		end
	else
		local tempData = LuxuryConfigManager:GetConfig(1)
		icon:SetSprite(tempData.atlas,tempData.icon)

		for i = 1, #allStar do
			allStar[i]:SetSprite("luxury_atlas","yingxiong_xingcheng1")
		end
	end
end